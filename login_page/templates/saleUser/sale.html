{% extends 'deshbroad/base_site.html' %}
{% block content %}

<style type="text/css">
  
      .search-form .form-group {
      float: right !important;
      transition: all 0.35s, border-radius 0s;
      width: 32px;
      height: 32px;
      background-color: #fff;
      box-shadow: 0 1px 1px rgba(0, 0, 0, 0.075) inset;
      border-radius: 25px;
      border: 2px solid #2471A3;
    }
    .search-form .form-group input.form-control {
      padding-right: 20px;
      border: 0 none;
      background: transparent;
      box-shadow: none;
      display:block;
    }
    .search-form .form-group input.form-control::-webkit-input-placeholder {
      display: none;
    }
    .search-form .form-group input.form-control:-moz-placeholder {
      /* Firefox 18- */
      display: none;
    }
    .search-form .form-group input.form-control::-moz-placeholder {
      /* Firefox 19+ */
      display: none;
    }
    .search-form .form-group input.form-control:-ms-input-placeholder {
      display: none;
    }
    .search-form .form-group:hover,
    .search-form .form-group.hover {
      width: 100%;
      border-radius: 4px 25px 25px 4px;
    }
    .search-form .form-group span.form-control-feedback {
      position: absolute;
      top: -1px;
      right: -2px;
      z-index: 2;
      display: block;
      width: 34px;
      height: 34px;
      line-height: 34px;
      text-align: center;
      color: #3596e0;
      left: initial;
      font-size: 14px;
    }

    a.btn:hover {
     -webkit-transform: scale(1.1);
     -moz-transform: scale(1.1);
     -o-transform: scale(1.1);
    }
   a.btn {
       -webkit-transform: scale(0.8);
       -moz-transform: scale(0.8);
       -o-transform: scale(0.8);
       -webkit-transition-duration: 0.5s;
       -moz-transition-duration: 0.5s;
       -o-transition-duration: 0.5s;
   }
   
  .section3 a i{font-size: 18px;}
  .section3 a i:hover{color: #AEB6BF;}

  .active-cyan-3{
      border: 1px solid #45B39D;
    }

</style>

           <!-- start: Content -->
            <div id="content">
               <div class="panel box-shadow-none content-header">
                  <div class="panel-body">
                    <div class="col-md-12">
                        <h3 class="animated fadeInLeft">Sales User Section</h3>
                        <p class="animated fadeInDown">
                          Table <span class="fa-angle-right fa"></span> List Of Sales User
                        </p>
                    </div>
                  </div>
              </div>
              <div class="col-md-12 top-20 padding-0">
                <div class="col-md-12">
                  <div class="panel">
                    <div class="panel-heading"><h3>List Of Sales User</h3></div>
                    <div class="panel-body">
                      <div class="responsive-table">
                        <div class="col-md-12 padding-0" style="margin-bottom: 10px;">

                          <div class="col-md-9 padding-0">
                                  <div class="active-cyan-3 active-cyan-4 mb-4">
                                    {% csrf_token %}
                                    <input id="search" class="form-control" type="text" placeholder="Search" aria-label="Search" name="search_text">
                                </div>         
                          </div>
                          <div class="col-md-3 padding-0">
                            {% if request.user.is_admin %}
                              <button type="button" class="btn btn-danger pull-right link" style="margin-left: 10px;" onclick="location.href='{% url 'delete_salesInfo_all' %}'">Delete All Data</button>
                              <button type="button" class="btn btn-primary pull-right" onclick="location.href='{% url 'export_users_xl_salesInfo' %}'">Export Data</button>
                              {% endif %}
                          </div>

                  

                        </div>
                        
                      <table id="datatables-example" class="table table-striped table-bordered" width="100%" cellspacing="0">
                      <thead style="color: #2C3E50; font-size: 15px;">
                        <tr>
                          <th>Code</th>
                          <th>Status</th>
                          <th>User</th>
                          <th>Scan Date</th>
                          {% if request.user.is_admin %}
                          <th>Action</th>
                          {% endif %}
                        </tr>
                      </thead>
                      
                      <tbody style="color: #138D75;" class="searchData">
                        {% for panda in panda%}
                        <tr>
                          <td>{{panda.activation.file}}</td>
                        <!--   <td>{{panda.activation.active_check}}</td> -->

                          {% if panda.activation.active_check == True %}
                          <td><span class="label label-danger">Scan</span></td>
                          {% else %}
                          <td><span class="label label-info">UnScan</span></td>
                          {% endif %}

                          {% if panda.user.full_name %}
                              <td>{{panda.user.full_name}}</td>
                          {% elif panda.user %}
                            <td>{{panda.user}}</td>
                          {% endif %}
                          
                          <td>{{panda.date}}</td>
                          {% if request.user.is_admin %}
                          <td>
                            <a href="{% url 'delete_saleInfo' panda.id %}"  class="btn btn-primary a-btn-slide-text center-block link">
                                 <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                                  <span><strong>Delete</strong></span>            
                            </a>
                          </td>
                          {% endif %}
                        </tr>
                        {% endfor %}

                        </tbody>
                        </table>
                      </div>
                  </div>
                </div>
              </div>

                <!-- Start pagination -->

          {% if panda.has_other_pages %}
            <ul class="pagination pull-right" style="margin-right: 30px; margin-bottom: 40px;"> 
              {% if panda.has_previous %}
                
                <li><a href="?page={{ panda.previous_page_number }}">Previous</a></li>
                <li><a href="?page=1">1</a></li>
                <li><a href="?page=1">..</a></li>
              {% else %}
                <li class="disabled"><span>Previous</span></li>
              {% endif %}

              {% for i in panda.paginator.page_range %}
                {% if panda.number == i %}
                  <li class="active"><span>{{ panda.number }} <span class="sr-only">(current)</span></span></li>
                {% else %}
                  {% if panda.next_page_number == i and i != panda.paginator.num_pages %}
                    <li><a href="?page={{ i }}">{{ i }}</a></li>
                  {% endif %}
                  {% if panda.previous_page_number == i and i != 1%}
                    <li><a href="?page={{ i }}">{{ i }}</a></li>
                  {% endif %}
                {% endif %}
              {% endfor %}

              {% if panda.has_next %}

                <li><a href="?page=1">..</a></li>
                <li><a href="?page={{ panda.paginator.num_pages }}"">{{ panda.paginator.num_pages }}</a></li>
                <li><a href="?page={{ panda.next_page_number }}">Next</a></li>

                
              {% else %}
                <li class="disabled"><span>Next</span></li>
              {% endif %}
            </ul>
          {% endif %}

          <!-- End pagination -->


              </div>
            </div>
          <!-- end: content -->

<!-- <script type="text/javascript">
  $(document).ready(function(){
    $('#datatables-example').DataTable();
  });
</script> -->

<script type="text/javascript">
      $(document).ready(function() {
        // Basic confirmation
        // $(".link").popConfirm();
        
        // Custom Title, Content and Placement
        $(".link").popConfirm({
          title: "Delete",
          content: "Are You Sure?",
          placement: "bottom"
        });
      });
</script>

<script type="text/javascript">
  $(function(){

        $("#search").keyup(function(){
            $.ajax({
                method: 'post',
                url: "{% url 'search_saleInfo' %}",
                data:{
                search_text : $("#search").val(),
                csrfmiddlewaretoken : $('input[name=csrfmiddlewaretoken]').val()
              },
                success: function(data) {
                    $(".searchData").html(data);
                    // alert('ss');
                },
                error: function(e) {
                    alert('Error' + e);
                }
            });
    });

      


  });

</script>

{% endblock %}
